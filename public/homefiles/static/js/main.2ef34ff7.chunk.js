(this["webpackJsonpnanaimg-home"]=this["webpackJsonpnanaimg-home"]||[]).push([[0],{28:function(e,t,a){},46:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(3),c=a.n(n),i=a(16),o=a.n(i),r=(a(28),a(6)),l=a(0),d=a(17),m=a(18),p=a(22),b=a(20),j=a(5),g=a.n(j),h=(a(46),a(21)),O=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).toggleOptions=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{expanded:!e.state.expanded}))},e.nameHandler=function(t){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{name:t.target.value}))},e.manHandler=function(t){var a=t.target.value.length>1e4?"red-text":"black-text";e.setState(Object(l.a)(Object(l.a)({},e.state),{},{manifesto:t.target.value,mCount:t.target.value.length,countClass:a}))},e.checkboxHandler=function(t){e.setState(Object(l.a)(Object(l.a)({},e.state),{},Object(r.a)({},t.target.name,t.target.checked)))},e.fileSelectedHandler=function(t){t.target.files[0].size>5e6?e.setState(Object(l.a)(Object(l.a)({},e.state),{},{selectedFile:t.target.files[0],errorMessage:"Your file is too big (max: 5MB)",message:""})):e.setState(Object(l.a)(Object(l.a)({},e.state),{},{selectedFile:t.target.files[0]}))},e.fileUploadHandler=function(){if(e.state.captcha)if(null!==e.state.selectedFile)if(e.state.manifesto.length<10001)if(e.state.name.length<31)if(e.state.selectedFile.size<5000001)if("image/png"===e.state.selectedFile.type||"image/jpg"===e.state.selectedFile.type||"image/jpeg"===e.state.selectedFile.type||"image/gif"===e.state.selectedFile.type){var t=new FormData;t.append("name",e.state.name),t.append("manifesto",e.state.manifesto),t.append("disableComments",e.state.disableComments),t.append("nsfw",e.state.nsfw),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{errorMessage:"",message:"Uploading..."})),g.a.post("https://nanaimg.net/upload",t).then((function(t){if(t.data.error)e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"",errorMessage:t.data.error}));else if(t.data.image_id)e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"Success! Redirecting...",errorMessage:""})),window.location.replace("https://nanaimg.net/image/".concat(t.data.image_id));else if(t.data.author){var a=t.data.author,s=new FormData;s.append("image",e.state.selectedFile,e.state.selectedFile.name),s.append("name",a.username),s.append("manifesto",e.state.manifesto),s.append("disableComments",e.state.disableComments),s.append("nsfw",e.state.nsfw),s.append("postId",a.postId),s.append("postColor",a.postColor),s.append("badge",a.badge),s.append("captcha",e.state.captchaKey),"https"===window.location.href.split(":")[0]?g.a.post("https://img.nanaimg.net/upload",s).then((function(t){t.data.error?e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"",errorMessage:t.data.error})):t.data.image_id?(e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"Success! Redirecting...",errorMessage:""})),window.location.replace("https://nanaimg.net/image/".concat(t.data.image_id))):e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"",errorMessage:"An error occurred"}))})):"http"===window.location.href.split(":")[0]?g.a.post("http://img.nanaimg.net/upload",s).then((function(t){t.data.error?e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"",errorMessage:t.data.error})):t.data.image_id?(e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"Success! Redirecting...",errorMessage:""})),window.location.replace("https://nanaimg.net/image/".concat(t.data.image_id))):e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"",errorMessage:"An error occurred"}))})):g.a.post("https://img.nanaimg.net/upload",s).then((function(t){t.data.error?e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"",errorMessage:t.data.error})):t.data.image_id?(e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"Success! Redirecting...",errorMessage:""})),window.location.replace("https://nanaimg.net/image/".concat(t.data.image_id))):e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"",errorMessage:"An error occurred"}))}))}else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{message:"",errorMessage:"An error occurred. Please try again."}))})).catch((function(t){console.log(t),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{errorMessage:"An error occurred. Please try again.",message:""}))}))}else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{errorMessage:"Invalid file format",message:""}));else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{errorMessage:"Your file is too big (max: 5MB)",message:""}));else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{errorMessage:"Your name is too long (max: 30 characters)",message:""}));else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{errorMessage:"Your manifesto is too long (max: 10000 characters)",message:""}));else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{errorMessage:"No file selected",message:""}));else e.setState(Object(l.a)(Object(l.a)({},e.state),{},{errorMessage:"Please solve the Captcha",message:""}))},e.recaptchaVerified=function(t){t?e.setState(Object(l.a)(Object(l.a)({},e.state),{},{captcha:!0,captchaKey:t})):e.setState(Object(l.a)(Object(l.a)({},e.state),{},{captcha:!1}))},e.recaptchaLoad=function(){console.log("captcha")},e.state={selectedFile:null,errorMessage:"",message:"",expanded:!1,disableComments:!1,name:"",manifesto:"",mCount:0,countClass:"black-text",errors:!1,nsfw:!1,captcha:!1,captchaKey:"",rendered:!1},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js?render=explicit",e.async=!0,document.body.appendChild(e),this.setState(Object(l.a)(Object(l.a)({},this.state),{},{rendered:!0}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{id:"home",children:[Object(s.jsx)("h2",{id:"upload-your-image",children:"Upload your image"}),Object(s.jsxs)("div",{id:"form",children:[Object(s.jsx)("input",{type:"file",id:"image-upload-button",onChange:this.fileSelectedHandler}),Object(s.jsx)("br",{}),this.state.rendered?Object(s.jsx)("div",{id:"recaptcha-home",children:Object(s.jsx)(h.a,{sitekey:"6LdiLvoZAAAAAI5d2nIWtZE5_abJFgGBJZNmepJK",onChange:this.recaptchaVerified})}):Object(s.jsx)(s.Fragment,{}),Object(s.jsx)("button",{onClick:this.fileUploadHandler,id:"image-submit-button",children:"Upload"}),Object(s.jsx)("button",{id:"options-button",type:"button",onClick:this.toggleOptions,children:"Options"}),""===this.state.errorMessage?Object(s.jsx)("p",{}):Object(s.jsx)("p",{id:"upload-error-message",children:this.state.errorMessage}),""===this.state.message?Object(s.jsx)("p",{}):Object(s.jsx)("p",{id:"upload-message",children:this.state.message})]}),this.state.expanded?Object(s.jsxs)("div",{id:"options",children:[Object(s.jsxs)("div",{className:"option",children:[Object(s.jsx)("label",{className:"options-label",children:"Name: "}),Object(s.jsx)("input",{className:"options-input",type:"text",name:"name",placeholder:"30 chars max (optional)",onChange:this.nameHandler})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"option",children:[Object(s.jsx)("label",{className:"options-label",children:"Manifesto: "}),Object(s.jsx)("textarea",{id:"manifesto",className:"options-input",name:"manifesto",placeholder:"Enter text (optional)",onChange:this.manHandler}),Object(s.jsxs)("p",{id:"man-count",children:[Object(s.jsx)("span",{className:this.state.countClass,children:this.state.mCount}),"/10000"]})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"option",children:[Object(s.jsx)("label",{className:"options-label",children:"Disable comments "}),Object(s.jsx)("input",{className:"options-input",type:"checkbox",name:"disableComments",onChange:this.checkboxHandler})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"option",children:[Object(s.jsx)("label",{className:"options-label",children:"Mark NSFW "}),Object(s.jsx)("input",{className:"options-input",type:"checkbox",name:"nsfw",onChange:this.checkboxHandler})]}),Object(s.jsx)("br",{})]}):Object(s.jsx)("div",{})]})}}]),a}(c.a.Component),u=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),c(e),i(e)}))};o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(O,{})}),document.getElementById("root")),u()}},[[51,1,2]]]);
//# sourceMappingURL=main.2ef34ff7.chunk.js.map