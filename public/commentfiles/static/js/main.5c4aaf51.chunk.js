(this["webpackJsonpnanaimg-image"]=this["webpackJsonpnanaimg-image"]||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(4),c=a.n(n),o=a(16),r=a.n(o),i=(a(28),a(5)),m=a(0),d=a(17),l=a(18),j=a(22),b=a(20),h=(a(29),a(6)),p=a.n(h),g=a(21),u=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).recaptchaVerified=function(t){t?e.setState(Object(m.a)(Object(m.a)({},e.state),{},{captcha:!0,captchaKey:t})):e.setState(Object(m.a)(Object(m.a)({},e.state),{},{captcha:!1}))},e.toggleExpand=function(){if(0===e.state.posts.length){for(var t=document.getElementsByClassName("comment-numbers"),a=[],s=document.querySelector("#read-p"),n=0;n<t.length;n++)a.push(t[n]);a.forEach((function(t){t.addEventListener("click",(function(){e.setState(Object(m.a)(Object(m.a)({},e.state),{},{commentText:"".concat(e.state.commentText,"#").concat(t.textContent)}))}))})),e.setState(Object(m.a)(Object(m.a)({},e.state),{},{expanded:!e.state.expanded,posts:[].concat(a),commentText:""===s.textContent?e.state.commentText:"".concat(e.state.commentText,"#").concat(s.textContent)}))}else e.setState(Object(m.a)(Object(m.a)({},e.state),{},{expanded:!e.state.expanded}))},e.textHandler=function(t){e.setState(Object(m.a)(Object(m.a)({},e.state),{},Object(i.a)({},t.target.name,t.target.value)))},e.commentHandler=function(t){e.setState(Object(m.a)(Object(m.a)({},e.state),{},{countClass:t.target.value.length>1e4?"red-text":"black-text",commentText:t.target.value,cCount:t.target.value.length}))},e.submitComment=function(){if(e.state.name.length>30)e.setState(Object(m.a)(Object(m.a)({},e.state),{},{errorMessage:"Your name is too long (max: 30 characters)"}));else if(e.state.commentText.length>1e4)e.setState(Object(m.a)(Object(m.a)({},e.state),{},{errorMessage:"Your comment is too long (max: 10000 characters)"}));else if(0===e.state.commentText.length)e.setState(Object(m.a)(Object(m.a)({},e.state),{},{errorMessage:"Comment field blank"}));else if(!1===e.state.captcha)e.setState(Object(m.a)(Object(m.a)({},e.state),{},{errorMessage:"Please solve the Captcha"}));else{var t=new FormData,a=window.location.pathname.split("/")[2];t.append("name",e.state.name),t.append("commentText",e.state.commentText),t.append("avatar",e.state.avatar),t.append("user_id",0),t.append("image_id",a),t.append("captcha",e.state.captchaKey),e.setState(Object(m.a)(Object(m.a)({},e.state),{},{errorMessage:"",message:"Sending comment..."})),"https"===window.location.href.split(":")[0]?p.a.post("https://nanaimg.net/comments",t).then((function(t){t.data.comment_id?(e.setState(Object(m.a)(Object(m.a)({},e.state),{},{message:"Success! Redirecting..."})),window.location.href="https://nanaimg.net/success/".concat(a,"/c").concat(t.data.comment_id)):t.data.error?e.setState(Object(m.a)(Object(m.a)({},e.state),{},{message:"",errorMessage:t.data.error})):e.setState(Object(m.a)(Object(m.a)({},e.state),{},{message:"",errorMessage:"An error occurred. Please try again."}))})).catch((function(t){e.setState(Object(m.a)(Object(m.a)({},e.state),{},{message:"",errorMessage:"An error occurred. Please try again."}))})):(window.location.href.split(":")[0],p.a.post("http://nanaimg.net/comments",t).then((function(t){t.data.comment_id?(e.setState(Object(m.a)(Object(m.a)({},e.state),{},{message:"Success! Redirecting..."})),window.location.href="https://nanaimg.net/success/".concat(a,"/c").concat(t.data.comment_id)):t.data.error?e.setState(Object(m.a)(Object(m.a)({},e.state),{},{message:"",errorMessage:t.data.error})):e.setState(Object(m.a)(Object(m.a)({},e.state),{},{message:"",errorMessage:"An error occurred. Please try again."}))})).catch((function(t){e.setState(Object(m.a)(Object(m.a)({},e.state),{},{message:"",errorMessage:"An error occurred. Please try again."}))})))}},e.state={expanded:!1,name:"",commentText:"",avatar:"",countClass:"black-text",errors:!1,errorMessage:"",message:"",cCount:0,posts:[],captcha:!1,captchaKey:"",rendered:!1},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{id:"comment-form",children:[Object(s.jsx)("button",{onClick:this.toggleExpand,id:"add-a-comment",children:"Add a comment"}),this.state.expanded?Object(s.jsxs)("div",{id:"expanded-comment-form",children:[Object(s.jsxs)("div",{className:"option",children:[Object(s.jsx)("label",{className:"options-label",children:"Name: "}),Object(s.jsx)("input",{className:"options-input",type:"text",name:"name",placeholder:"30 chars max (optional)",value:this.state.name,onChange:this.textHandler})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"option",children:[Object(s.jsx)("label",{className:"options-label",children:"Text: "}),Object(s.jsx)("textarea",{id:"comment-textarea",className:"options-input",type:"text",name:"commentText",placeholder:"Enter Text (required)",value:this.state.commentText,onChange:this.commentHandler}),Object(s.jsxs)("p",{id:"char-count",children:[Object(s.jsx)("span",{className:this.state.countClass,children:this.state.cCount}),"/10000"]})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"option",children:[Object(s.jsx)("label",{className:"options-label",children:"Avatar: "}),Object(s.jsx)("input",{className:"options-input",type:"text",name:"avatar",placeholder:"Image number (optional)",value:this.state.avatar,onChange:this.textHandler})]}),Object(s.jsx)("br",{}),Object(s.jsx)("div",{id:"recaptcha-comment",children:Object(s.jsx)(g.a,{sitekey:"6LdiLvoZAAAAAI5d2nIWtZE5_abJFgGBJZNmepJK",onChange:this.recaptchaVerified})}),Object(s.jsx)("button",{id:"comment-submit-button",onClick:this.submitComment,children:"Submit"})]}):Object(s.jsx)("div",{}),""===this.state.errorMessage?Object(s.jsx)("p",{}):Object(s.jsx)("p",{id:"comment-error-message",children:this.state.errorMessage}),""===this.state.message?Object(s.jsx)("p",{}):Object(s.jsx)("p",{id:"comment-upload-message",children:this.state.message})]})}}]),a}(c.a.Component),O=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),s(e),n(e),c(e),o(e)}))};r.a.render(Object(s.jsx)(u,{}),document.getElementById("root")),O()}},[[51,1,2]]]);
//# sourceMappingURL=main.5c4aaf51.chunk.js.map